!function(e){e.Roadmap=function(t,a,n){var o=this;o.el=t,o.$el=e(t),o.init=function(){if(o.options=e.extend({},e.Roadmap.defaultOptions,a),o.months=e.Roadmap.months,"object"!=typeof n)throw"Error: Invalid dataset passed. Please pass a valid JSON object";o.data=n,o.build()},o.build=function(){var t=!0;e("<div/>",{"class":"roadmap"}).appendTo(o.$el),e("<div/>",{"class":"timeline"}).appendTo(".roadmap"),e.each(o.data.events,function(a,n){var d=e("<div/>",{"class":"event"});e("<span/>",{"class":"point"}).appendTo(d),e("<div/>",{"class":"body"}).appendTo(d),e("<div/>",{"class":"header",text:n.title}).appendTo(e(d).find(".body")),e("<div/>",{"class":"content",text:n.content}).appendTo(e(d).find(".body")),e("<div/>",{"class":"timestamp",text:n.datetime}).appendTo(e(d).find(".body"));var r="undefined"!=typeof o.data.events[a-1]?o.data.events[a-1].datetime:null;if(!o.inSameSection(n.datetime,r)){t=!t;var s=t?"right":"left";e("<div/>",{"class":"section "+s}).appendTo(".timeline"),e("<div/>",{"class":"section-head",text:o.getSectionHeader(n.datetime)}).appendTo(".section:last")}d.appendTo(".section:last")})},o.inSameSection=function(e,t){if(null===t)return!1;var e=new Date(e),t=new Date(t);switch(o.options.sGroupBy){case"d":return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();case"m":return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();case"y":return e.getFullYear()===t.getFullYear();default:throw"Error: Invalid sGroupBy value."}},o.getSectionHeader=function(t){var a=new Date(t);switch(o.options.sGroupBy){case"d":return e.Roadmap.days[a.getDay()]+", "+a.getDate()+" "+e.Roadmap.months[a.getMonth()]+" "+a.getFullYear();case"m":return e.Roadmap.months[a.getMonth()]+" "+a.getFullYear();case"y":return a.getFullYear();default:throw"Error: Invalid sGroupBy value. Please use either 'd', 'm' or 'y' to group the events by day, month or year, respectively"}},o.init()},e.Roadmap.defaultOptions={sGroupBy:"m"},e.Roadmap.months=["January","February","March","April","May","June","July","August","September","October","November","December"],e.Roadmap.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.fn.roadmap=function(t,a){return this.each(function(){new e.Roadmap(this,a,t)})}}(jQuery);
